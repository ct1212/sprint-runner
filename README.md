# Sprint Runner

AI-driven sprint automation using Claude CLI. State a goal, generate a PRD and task list, then let Claude build it task-by-task.

## Prerequisites

- [Claude CLI](https://docs.anthropic.com/en/docs/claude-code) installed and authenticated
- Git repository initialized
- Node.js 18+ (if using the default stack)

## Setup

From your project directory, run:

```bash
bash <(curl -s https://raw.githubusercontent.com/ct1212/sprint-runner/main/setup.sh)
```

Or clone and copy manually:

```bash
git clone https://github.com/ct1212/sprint-runner.git /tmp/sprint-runner
cp -r /tmp/sprint-runner/scripts ./scripts
cp -r /tmp/sprint-runner/sprints ./sprints
chmod +x scripts/sprint_*.sh
rm -rf /tmp/sprint-runner
```

## Quick Start

```bash
# 1. Create a new sprint
./scripts/sprint_new.sh v1 "Build a REST API for user management"

# 2. Edit the goal file — refine acceptance criteria, stack, constraints
vi sprints/v1/00-goal.md

# 3. Generate PRD and task checklist from the goal
./scripts/sprint_prd.sh v1

# 4. Review the generated PRD and tasks — reorder, add, or remove tasks as needed
vi sprints/v1/01-prd.md
vi sprints/v1/02-tasks.md

# 5. Run tasks one at a time
./scripts/sprint_dev.sh v1

# 6. Or run all tasks automatically in a loop
./scripts/sprint_dev.sh v1 --loop
```

## Scripts

### `sprint_new.sh` — Create a sprint

```bash
./scripts/sprint_new.sh <name> "goal description"
```

Creates `sprints/<name>/` with:

- `00-goal.md` — Goal template to fill in (stack, constraints, acceptance criteria)
- `01-prd.md` — Placeholder (generated by sprint_prd)
- `02-tasks.md` — Placeholder (generated by sprint_prd)
- `03-status.md` — Execution log

### `sprint_prd.sh` — Generate PRD + tasks

```bash
./scripts/sprint_prd.sh <name> [--model sonnet] [--max-budget-usd 2.00]
```

Reads `00-goal.md` and uses Claude to generate:
- A full PRD with scope, architecture, interfaces, acceptance criteria, and risks
- A checklist of bite-sized tasks (5-20 min each)

### `sprint_dev.sh` — Execute tasks

```bash
./scripts/sprint_dev.sh <name> [--loop] [--dry-run] [--model sonnet] [--max-budget-usd 5.00]
```

| Flag               | Description                             |
| ------------------ | --------------------------------------- |
| `--loop`           | Process all remaining tasks in sequence |
| `--dry-run`        | Show the next task without executing    |
| `--model`          | Claude model to use (default: `sonnet`) |
| `--max-budget-usd` | Per-task spending cap (default: `5.00`) |

Each task runs through: Claude edits files → lint → test → commit. If lint or tests fail, changes are reverted and the failure is logged to `03-status.md`.

## Sprint Directory Structure

```
sprints/
├── README.md          ← overview (optional)
├── v1/
│   ├── 00-goal.md     ← what you want to build
│   ├── 01-prd.md      ← generated PRD
│   ├── 02-tasks.md    ← generated task checklist
│   └── 03-status.md   ← execution log
└── v2/
    └── ...
```

## How It Works

1. **You define the goal** — Write what you want built in `00-goal.md`, including stack preferences, constraints, and acceptance criteria.

2. **Claude generates a plan** — `sprint_prd.sh` sends your goal to Claude, which produces a PRD and a checklist of granular tasks.

3. **Claude executes each task** — `sprint_dev.sh` picks the next unchecked task, gives Claude the full context (task list + package.json), and lets it make the code changes.

4. **Automated quality gates** — After each task, the script runs lint and tests. Passing tasks are committed; failing tasks are reverted and logged.

5. **Progress tracking** — Tasks are checked off in `02-tasks.md` and timestamped entries are appended to `03-status.md`.

## Customizing for Your Stack

The default `00-goal.md` template assumes Node.js/TypeScript. Edit `scripts/sprint_new.sh` to change the default stack section. The `sprint_dev.sh` script also has project defaults in its prompt — update these to match your stack:

```bash
# In sprint_dev.sh, find and update this section:
Project defaults:
- Node.js and TypeScript (ESM modules)
- Vitest for tests
- ESLint + Prettier for linting
- No global installs, no sudo
```

For non-Node.js projects, also update the lint/test commands in `sprint_dev.sh` (search for `npm run lint` and `npm test`).

## Tips

- **Be specific in `00-goal.md`** — the more concrete your acceptance criteria, the better the generated tasks
- **Review `02-tasks.md` before running dev** — reorder, add, or remove tasks as needed
- **Use `--dry-run` first** to see what task would execute next
- **Use `--max-budget-usd`** to cap spending on complex tasks
- **Name sprints meaningfully** — use `v1`, `v2` or descriptive names like `auth`, `dashboard`
- **One sprint = one feature area** — keep sprints focused for better results
